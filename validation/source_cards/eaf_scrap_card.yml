# Source card: EAF–Scrap (site S1+S2, crude steel)
# This card projects the rich model down to a common literature boundary.

id: eaf_scrap_site_s12_crude
title: "EAF–Scrap (site, Scope 1+2, crude steel)"
citation: "TBD – fill with the specific paper/report you want to match"
unit: "t CO2e / t crude steel"
reported_ef: 0.67  # PLACEHOLDER. Replace with the source value if available.

boundary:
  scope12_site: true
  functional_unit: "1 t crude steel (Liquid Steel)"
  stop_stage: "Liquid"           # compare at crude steel, not finished
  include_upstream_mining: false
  include_pelletizing: false
  include_sintering: false
  include_lime_calcination: false # unless EAF uses on-site lime kiln
  include_oxygen_plant: false     # assume external ASU or negligible
  internal_power_credit: false    # no process-gas-to-power credit for EAF route
  scrap_credit: false             # no avoided burden for scrap in site EF

# Electricity EF selection; resolved from your electricity_intensity.yml
# Set country_code to BRA (or OECD avg if you create that entry in the map)
electricity:
  country_code: "CHN"          # e.g., BRA, USA, OECD-AVG (if you add)
  source: "electricity_intensity.yml"
  value_gCO2_per_MJ: null       # will be filled by map at runtime
  year: null                    # optional metadata

energy_carriers:
  use_energy_matrix: true       # keep your base carrier shares for EAF
  force_eaf_electricity_only: false  # set true to zero-out NG/LPG if needed

unknowns:
  eaf_yield:
    low: 0.95
    mid: 0.97
    high: 0.99
  eaf_ng_share:                 # share of NG/LPG in EAF energy, if modeled
    low: 0.00
    mid: 0.05
    high: 0.10
  carbon_injection_kg_per_t:    # direct carbon additions in EAF, if modeled
    low: 5
    mid: 10
    high: 15

model_projection:
  route_preset: "EAF-Scrap"
  demand:
    stage_key: "Liquid"
    material: "Liquid Steel"
    quantity_kg: 1000

  # Lock incompatible upstream cores off so the path is unique
  production_routes_forced_off:
    - "Blast Furnace"
    - "Basic Oxygen Furnace"
    - "Direct Reduction Iron"
    - "Coke Production"
    - "Sintering"
    - "Pelletizing"

  # Ensure EAF feeds Scrap only
  recipe_overrides:
    "Electric Arc Furnace":
      inputs:
        "Scrap": 1.0
        "Pig Iron": 0.0
        "Direct Reduced Iron": 0.0
        "DRI": 0.0
        "HBI": 0.0

path_map:
  # Minimal path for crude steel comparison
  - material: "Liquid Steel"
    producer: "Electric Arc Furnace"
    inputs:
      - "Scrap (external purchase)"
      - "Electricity"
      - "Oxygen (if modeled)"
      - "Carbon injection (if modeled)"

  # If you later need finished products, extend beyond this stop stage:
  # - Liquid Steel → Continuous Casting (choose one variant)
  # - Cast Steel (IP1) → Hot Rolling OR Rod/bar/section Mill
  # - Manufactured Feed (IP4) → Direct use of Basic Steel Products (IP4)
  # - Finished Products → No Coating / or specific coating process

expected_result:
  band_tCO2_per_t:
    low: 0.2
    high: 0.6
  pass_rule: "within ±15% of reported_ef OR inside band"

notes: |
  Compare at site (Scope 1+2). Outside-mill units (IP4, coatings) are excluded by
  the model's OUTSIDE_MILL_PROCS. Internal power credit is zero in this route by
  construction (no BF/CP gas). For OECD averages, either set country_code to an
  OECD-AVG entry in your electricity map or override Electricity directly here.
